 HTTP - это протокол передачи произвольных данных между потребителями (клиентами) и поставщиками (серверами). Клиенты инициируют соединение и посылают **запрос** (request) - сообщение, указывающее серверу, что он должен сделать, а сервера ожидают соединения для получения запроса, производят необходимые действия и возвращают обратно **ответ** (response) - сообщение с результатом.

## Структура протокола

Каждое HTTP-сообщение, будь то запрос или ответ, состоит из трёх частей, которые передаются в указанном порядке:

* Стартовая строка (Starting line);
* Заголовки (Headers) — характеризуют тело сообщения, параметры передачи и прочие сведения;
* Тело сообщения (Message Body) — непосредственно данные сообщения. Обязательно должно отделяться от заголовков пустой строкой.

Тело сообщения может отсутствовать, но стартовая строка и заголовок являются обязательными элементами.

### Стартовая строка

Стартовая строка — определяет тип сообщения. Стартовые строки различаются для запроса и ответа. 

#### Стартовая строка запроса

Стартовая строка запроса выглядит так: `Метод URI HTTP/Версия`, где:

* Метод - тип запроса, указывающий на основную операцию над ресурсом: GET, HEAD, POST, OPTIONS, PUT, PATCH, DELETE, TRACE, CONNECT. Чтобы узнать, какой метод используется в запросе используйте `console.log(request.method)`
* URI - путь к запрашиваемому документу. Чтобы узнать, какой URI используется в запросе используйте `console.log(request.url)`
* Версия - пара разделённых точкой цифр. Например: 1.1.

Чтобы запросить страницу статьи в Википедии, например https://ru.wikipedia.org/wiki/HTTP, клиент должен передать следующее:

```
GET /wiki/HTTP HTTP/1.1
Host: ru.wikipedia.org
```

#### Стартовая строка ответа

Стартовая строка ответа сервера имеет следующий формат: `HTTP/Версия КодСостояния Пояснение`, где:

* Версия — пара разделённых точкой цифр, как в запросе;
* Код состояния (Status Code) — три цифры. По коду состояния определяется дальнейшее содержимое сообщения и поведение клиента. Список кодов состояния HTTP можно посмотреть [здесь](https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP).;
* Пояснение (англ. Reason Phrase) — текстовое короткое пояснение к коду ответа для пользователя. Никак не влияет на сообщение и является необязательным.

Например, стартовая строка ответа сервера на предыдущий запрос может выглядеть так:

```
HTTP/1.1 200 OK
```

### Заголовки

Заголовки HTTP (HTTP Headers) — это строки в HTTP-сообщении, содержащие разделённую двоеточием пару параметр-значение. Формат заголовков соответствует общему формату заголовков текстовых сетевых сообщений ARPA (см. [RFC 822](https://tools.ietf.org/html/rfc822)).

Примеры заголовков:

Server: Apache/2.2.11 (Win32) PHP/5.3.0
Last-Modified: Sat, 16 Jan 2010 21:16:42 GMT
Content-Type: text/plain; charset=windows-1251
Content-Language: ru

В примере выше каждая строка представляет собой один заголовок. При этом то, что находится до двоеточия, называется именем (name), а что после него — значением (value). 

Более подробно о заголовках можно прочитать [здесь](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8_HTTP) и [здесь](https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%BE%D0%B2_HTTP).

### Тело сообщения

Тело сообщения должно отделяться от заголовков хотя бы одной пустой строкой.

## Работа с объектом req

Все свойства объекта req вы можете посмотреть [здесь](https://expressjs.com/en/api.html#req.app)

Заголовки запросов хранятся в `req.headers`. Чтобы увидеть список заголовков HTTP-запросов, вы можете использовать:

```js
console.log(JSON.stringify(req.headers));
```

Создайте файл index.js и скопируйте в него следующий код:

```js
const express = require("express")
const app = express()

app.use((req, res, next) => {
    console.log(req.headers)
    next()
})

app.get("/", (req, res) => {
    res.json(
        req.headers
    )
})

app.listen(3000)
```





## Что происходит при выполнении HTTP-запросов?

как браузеры выполняют запросы к серверам с использованием протокола HTTP/1.1.

* [Что такое Http заголовки (Http headers). Общая теория.](http://borpost.ru/php/chto-takoe-http-zagolovki-http-headers-obshhaya-teoriya/)
* [Руководство по Node.js, часть 8: протоколы HTTP и WebSocket](https://habr.com/ru/company/ruvds/blog/424557/)
* [HTTP заголовки](https://developer.mozilla.org/ru/docs/Web/HTTP/%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8)
* [Fetch](https://learn.javascript.ru/fetch)
* [Сетевые запросы](https://learn.javascript.ru/network)
* https://expressjs.com/ru/api.html#req


Используемые ресурсы:

* https://ru.wikipedia.org/wiki/HTTP
* https://expressjs.com/en/api.html#req.app
